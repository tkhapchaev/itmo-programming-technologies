 # Lab-3
 **Все задания данной лабораторной выполняются на основе уже сделанной вами лабораторной №2.**


## Миграции.
Необходимо реализовать изменение схемы базы данных посредством миграций с помощью системы миграции Flyway.
Необходимо создать два скрипта миграции: 
- Первым будет являться ваш скрипт создания схемы базы данных из лабораторной №2
- Вторым изменения, которые нужно будет внести в схему, указанные в приложении А данной лабораторной.

**Важно!**

Ваши миграции должны отрабатывать, как на базе данных, в которой нет нужных вам таблиц и прочих объектов БД, так и на базе данных, в которых уже все данные есть.

## Spring Data

> **1.** Подключить к проекту Spring Data.

> **2.** Создать для уже существующих сущностей, (используемых для Hibernate), репозитории.Пример:
> ```
> public interface CarBrandRepository extends JpaRepository<Long, CarBrand> { }
> ```

> **3.** Необходимо реализовать метод, который возвращает все дочерние сущности по идентификатору родительской:
> ```
> public List<T> getAllByVId(id); // Здесь T – это дочерняя сущность, V – родительская.
> ```

> **4)** Необходимо реализовать метод, который возвращает родительские сущности по определенному значению:
> ```
> public List<T> getAllByName(name); // Здесь T – это тип сущности.
> ``` 

## Spring MVC


> **1.** Подключить к проекту Spring MVC.

> **2.** Реализовать CRUD для каждой сущности, к которому можно обратиться через HTTP. (Чтобы было проще и понятнее, почитайте про @Controller и @RestController – это аннотации Spring, позволяющие создавать объекты прослушивающие HTTP – запросы).

> **3.** Для всех созданных классов – контроллеров сделать интерфейс - Swagger.

## Приложение А.

Ниже представлены названия таблиц для БД с атрибутами каждой таблицы (название, тип данных). Зеленым помечены изменения, для которых необходимо сделать миграцию.

## Вариант 1.

### Хозяин

| Название поля | Тип данных поля |
|---------------|-----------------|
| Идентификатор | Long            |
| Имя           | Varchar         |
| Дата рождения | Date            |


### Котик

| Название поля | Тип данных поля |
|---------------|-----------------|
| Идентификатор | Long            |
| Имя           | Varchar         |
| Дата рождения | Date            |
| Порода        | Varchar         |
| Цвет          | Varchar         |
| $${\color{green}Длина \spaceхвоста}$$  | $${\color{green} Int}$$          |
| Владелец      | Long            |


### Блоха

| Название поля | Тип данных поля |
|---------------|-----------------|
| Идентификатор | Long            |
| Имя           | Varchar         |
| Котик         | Long            |

- В таблице «Котик» атрибут «Хозяин» является вторичным ключом для атрибута «Идентификатор» из таблицы «Хозяин»;
- Атрибуты «Идентификатор» в обеих таблицах должны быть первичными ключами;
- Атрибут «Цвет» таблицы «Котик» должен представлять из себя ограниченное количество значений: белый, рыжий, коричневый, серый, черный.
